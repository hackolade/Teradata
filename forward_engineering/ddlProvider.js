var It=Object.defineProperty;var c=(m,L)=>It(m,"name",{value:L,configurable:!0});var G=(m,L)=>()=>(L||m((L={exports:{}}).exports,L),L.exports);var qe=G((gt,je)=>{je.exports={createDatabase:'CREATE DATABASE "${name}" AS ${databaseOptions};',createSession:'SET SESSION DATABASE "${name}";',columnDefinition:'"${name}" ${type}${inlineLength}${not_null}${uppercase}${caseSpecific}${format}${default}${storageFormat}${characterSet}${withSchema}${autoColumn}${compress}${compressUsing}${decompressUsing}${inlineCheckConstraint}${inlineUniqueConstraint}${inlinePKConstraint}',createTable:"CREATE${tableSet}${temporary}${traceTable} TABLE ${name}${tableOptions} (\n		${column_definitions}${keyConstraints}${checkConstraints}${foreignKeyConstraints}\n	)${tableIndexes}${tablePreservation};\n",createAsSelectTable:"CREATE${tableSet}${temporary} TABLE ${name}${tableOptions} (\n		${column_definitions}${keyConstraints}${checkConstraints}${foreignKeyConstraints}\n	)\n	AS (\n	${selectStatement} \n	)${tableIndexes}${tablePreservation};\n",createErrorTable:"CREATE ERROR TABLE ${tableName} FOR ${targetDataTable};\n",createForeignTable:"CREATE FOREIGN TABLE ${name}${tableOptions} (\n		${column_definitions}${keyConstraints}${checkConstraints}${foreignKeyConstraints}\n	)\n	USING (\n	${usingOptions}\n	)${tableIndexes}${tablePreservation};\n",createHashIndex:"CREATE HASH INDEX ${indexName}${indexOptions} (\n		${indexKeys}\n	)\n	ON ${tableName}${orderBy};\n",createJoinIndex:"CREATE JOIN INDEX ${indexName}${indexOptions}\n	AS ${selectStatement};\n",createKeyConstraint:"CONSTRAINT ${constraintName}${constraintType}${columns}",checkConstraint:"${name}${expression}",createForeignKeyConstraint:"FOREIGN KEY (${foreignKey}) REFERENCES ${checkOption} ${primaryTable} (${primaryKey})",createView:"CREATE${recursive} VIEW ${name} (\n	${columnList}\n)\nAS ${selectStatement};\n",viewSelectStatement:"SELECT ${keys}\n	FROM ${tableName}",createStructuredType:`CREATE TYPE \${typeName} AS (
	\${columnDefinitions}
)
NOT FINAL\${methodSpecification};
`,createDistinctType:"CREATE TYPE ${typeName} AS ${baseType} FINAL${methodSpecification};\n",createArrayType:"CREATE TYPE ${typeName} AS ${baseType}${default};\n",dropDatabase:'DROP DATABASE "${databaseName}";\n',modifyDatabase:'MODIFY DATABASE "${databaseName}" AS ${databaseOptions};\n',dropTable:"DROP ${temporary}TABLE ${name};\n",alterTable:"ALTER TABLE ${tableName}${tableOptions}${alterStatement};",addColumn:" ADD ${columnDefinition}",dropColumn:" DROP ${name}",rename:" RENAME ${oldName} TO ${newName}",dropCheckConstraint:" DROP CONSTRAINT ${name} CHECK",addCheckConstraint:" ADD CONSTRAINT ${name} ${expression}",modifyCheckConstraint:" MODIFY CONSTRAINT ${name} ${expression}",dropSecondaryIndex:"DROP INDEX ${indexName} ON ${tableName};",dropIndex:"DROP${indexType} INDEX ${indexName};",dropView:"DROP VIEW ${viewName};",renameView:"RENAME VIEW ${oldViewName} TO ${newViewName};"}});var Xe=G((Ut,ze)=>{ze.exports={number:"NUMBER",string:"TEXT",date:"DATE",timestamp:"TIMESTAMP",binary:"BYTE",boolean:"NUMBER",document:"OBJECT",array:"ARRAY",objectId:"VARCHAR(24)",default:"CHAR"}});var Qe=G((Bt,We)=>{We.exports={BYTEINT:{capacity:1},SMALLINT:{capacity:2},INT:{capacity:4},INTEGER:{capacity:4},BIGINT:{capacity:8},DECIMAL:{mode:"decimal"},DEC:{mode:"decimal"},NUMERIC:{mode:"decimal"},FLOAT:{capacity:4,mode:"float"},"DOUBLE PRECISION":{capacity:8,mode:"float"},REAL:{capacity:8,mode:"float"},NUMBER:{mode:"number"},CHAR:{mode:"char"},CHARACTER:{mode:"char"},VARCHAR:{mode:"varchar"},"CHAR VARYING":{mode:"varchar"},"CHARACTER VARYING":{mode:"varchar"},"LONG VARCHAR":{mode:"long varchar"},VARGRAPHIC:{mode:"vargraphic"},"LONG VARGRAPHIC":{mode:"long vargraphic"},CLOB:{mode:"clob"},"CHARACTER LARGE OBJECT":{mode:"clob"},BYTE:{mode:"byte"},VARBYTE:{mode:"varbyte"},BLOB:{mode:"blob"},DATE:{format:"YYYY-MM-DD"},TIME:{format:"hh:mm:ss"},TIMESTAMP:{format:"YYYY-MM-DD hh:mm:ss"},ST_Geometry:{mode:"ST_Geometry"},MBR:{mode:"MBR"},MBB:{mode:"MBB"},JSON:{},XML:{},XMLTYPE:{},DATASET:{},PERIOD:{},"INTERVAL YEAR":{},"INTERVAL MONTH":{},"INTERVAL DAY":{},"INTERVAL HOUR":{},"INTERVAL MINUTE":{},"INTERVAL SECOND":{}}});var De=G((Pt,Ze)=>{var yt=c(m=>Array.isArray(m)?m.reduce((L,B)=>({...L,[B.id]:B.value}),{}):{},"getAdditionalOptions");Ze.exports=yt});var tt=G((Mt,et)=>{var bt=c(({commentIfDeactivated:m})=>(L,B)=>{let C=!1;return{...B,...["dropDatabase","dropTable","dropColumn","dropIndex","dropCheckConstraint","dropView"].reduce((E,v)=>({...E,[v]:(...y)=>{let $=B[v](...y);return C=C||!!$,L||!$?$:m($,{isActivated:!1})}}),{}),isDropInStatements(){return C}}},"dropStatementProxy");et.exports=bt});var rt=G((vt,nt)=>{nt.exports=({_:m,commentIfDeactivated:L,checkAllKeysDeactivated:B,divideIntoActivatedAndDeactivated:C,assignTemplates:E})=>({generateConstraintsString:c((b,M)=>{var r,o;let d=L(((b==null?void 0:b.deactivatedItems)||[]).join(`,
		`),{isActivated:!M,isPartOfLine:!0}),T=(r=b==null?void 0:b.activatedItems)!=null&&r.length?`,
		`+b.activatedItems.join(`,
		`):"",u=(o=b==null?void 0:b.deactivatedItems)!=null&&o.length?`
		`+d:"";return T+u},"generateConstraintsString"),foreignKeysToString:c(b=>{if(Array.isArray(b)){let M=b.filter(u=>m.get(u,"isActivated",!0)).map(u=>`"${m.trim(u.name)}"`),d=b.filter(u=>!m.get(u,"isActivated",!0)).map(u=>`"${m.trim(u.name)}"`),T=d.length?L(d,{isActivated:!1,isPartOfLine:!0}):"";return M.join(", ")+T}return b},"foreignKeysToString"),foreignActiveKeysToString:c(b=>b.map(M=>m.trim(M.name)).join(", "),"foreignActiveKeysToString"),createKeyConstraint:c((b,M)=>d=>{var _;let T=c(({name:S})=>`"${S}"`,"columnMapToString"),u=B(d.columns),r=C(d.columns,T),o=(_=r==null?void 0:r.deactivatedItems)!=null&&_.length?L(r.deactivatedItems.join(", "),{isActivated:!1,isPartOfLine:!0}):"",R=!u&&M?" ("+r.activatedItems.join(", ")+o+")":" ("+d.columns.map(T).join(", ")+")";return{statement:E(b.createKeyConstraint,{constraintName:d.name?`"${m.trim(d.name)}" `:"",constraintType:d.keyType,columns:R}),isActivated:!u}},"createKeyConstraint")})});var st=G((xt,at)=>{at.exports=(m,L)=>{let B=c((r,o)=>Object.entries(r.properties).map(o),"mapProperties"),C=c(r=>r.compositeUniqueKey?!1:!!r.unique,"isUniqueKey"),E=c(r=>r.compositeUniqueKey||r.compositePrimaryKey?!1:!!r.primaryKey,"isPrimaryKey"),v=c(r=>C(r)&&m.isEmpty(r.uniqueKeyConstraintName),"isInlineUnique"),y=c(r=>E(r)&&m.isEmpty(r.primaryKeyConstraintName),"isInlinePrimaryKey"),$=c((r,o,R,_)=>L({keyType:o,name:r,columns:[{name:R,isActivated:_}]}),"hydrateKeyConstraintOptions"),x=c((r,o)=>Object.keys(o).find(R=>o[R].GUID===r),"findName"),b=c((r,o)=>m.get(Object.values(o).find(R=>R.GUID===r),"isActivated",!0),"checkIfActivated"),M=c((r,o)=>m.map(r,R=>({name:x(R.keyId,o.properties),isActivated:b(R.keyId,o.properties)})),"getKeys"),d=c(r=>Array.isArray(r.primaryKey)?r.primaryKey.filter(o=>!m.isEmpty(o.compositePrimaryKey)).map(o=>({...$(o.constraintName,"PRIMARY KEY",null,r),columns:M(o.compositePrimaryKey,r)})):[],"getCompositePrimaryKeys"),T=c(r=>Array.isArray(r.uniqueKey)?r.uniqueKey.filter(o=>!m.isEmpty(o.compositeUniqueKey)).map(o=>({...$(o.constraintName,"UNIQUE",null,r),columns:M(o.compositeUniqueKey,r)})):[],"getCompositeUniqueKeys");return{getTableKeyConstraints:c(r=>{if(!r.properties)return[];let o=B(r,([_,S])=>{if(E(S)){if(m.isEmpty(S.primaryKeyConstraintName))return}else return;return $(S.primaryKeyConstraintName,"PRIMARY KEY",_,S.isActivated,r)}).filter(Boolean),R=m.flatten(B(r,([_,S])=>{if(C(S)){if(m.isEmpty(S.uniqueKeyConstraintName))return}else return;return $(S.uniqueKeyConstraintName,"UNIQUE",_,S.isActivated,r)})).filter(Boolean);return[...o,...d(r),...R,...T(r)]},"getTableKeyConstraints"),isInlineUnique:v,isInlinePrimaryKey:y}}});var ot=G((Gt,it)=>{it.exports=(m,L,B)=>{let C=c((T,u)=>{if(!u)return T.map(R=>`"${R.name}"`).join(`,
	`);let r=T.filter(R=>R.isActivated).map(R=>`"${R.name}"`),o=T.filter(R=>!R.isActivated).map(R=>`"${R.name}"`);return r.length===0?B(o.join(`,
	`),{isActivated:!1},!0):o.length===0?r.join(`,
	`):r.join(`,
	`)+`
	`+B(o.join(`,
	`),{isActivated:!1},!0)},"viewColumnsToString"),E=c((T,u)=>u?`"${u}"."${T}"`:`"${T}"`,"getTableName"),v=E,y=c((T,u)=>T?`"${T}"."${u}"`:u,"getDefaultJournalTableName"),$=c((T,u)=>T===u?`${u} JOURNAL`:`${T} ${u} JOURNAL`,"getJournalingStrategy"),x=c(({db_account:T,db_default_map:u,db_permanent_storage_size:r,spool_files_size:o,has_fallback:R,db_before_journaling_strategy:_,db_after_journaling_strategy:S,db_default_journal_table:w,db_default_journal_db:j,dropDefaultJournalTable:q})=>{let V=c((H,D,i=!1)=>l=>H?[...l,D]:i?[...l,i]:l,"add"),z=`${q?"DROP ":""}DEFAULT JOURNAL TABLE = ${y(j,w)}`;return m.flow([V(r,`PERMANENT = ${r}`),V(o,`SPOOL = ${o}`),V(T,`ACCOUNT = ${T}`),V(u,`DEFAULT MAP = ${u}`),V(R,"FALLBACK","NO FALLBACK"),V(_,$(_,"BEFORE")),V(S,$(S,"AFTER")),V(w,z),H=>L(`
 `+H.join(`,
 `))])([])},"getDatabaseOptions"),b=c(T=>T?T.alias?`"${T.name}" AS "${T.alias}"`:`"${T.name}"`:"","getKeyWithAlias");return{getTableName:E,getIndexName:v,getJournalingStrategy:$,getDefaultJournalTableName:y,getDatabaseOptions:x,getViewData:c(T=>Array.isArray(T)?T.reduce((u,r)=>{if(!r.tableName)return u.columns.push(b(r)),u;let o=`"${r.dbName}"."${r.tableName}"`;return u.tables.includes(o)||u.tables.push(o),u.columns.push({statement:`${o}.${b(r)}`,isActivated:r.isActivated}),u},{tables:[],columns:[]}):{tables:[],columns:[]},"getViewData"),viewColumnsToString:C,shouldDropDefaultJournalTable:c(T=>!!(T.old.db_default_journal_db&&T.old.db_default_journal_table&&!T.new.db_default_journal_db&&!T.new.db_default_journal_table),"shouldDropDefaultJournalTable")}}});var lt=G((wt,ct)=>{ct.exports=({_:m,tab:L,getJournalingStrategy:B,commentIfDeactivated:C,divideIntoActivatedAndDeactivated:E})=>{let v=c(i=>i!=null&&i.percentUnit?`${i.freeSpaceValue} PERCENT`:(i==null?void 0:i.freeSpaceValue)||"","getFreeSpaceValue"),y=c((i={})=>{if(i.mergeRatio==="SPECIFIC"&&i.specificRatio){let l=i.percentUnit?"PERCENT":"";return`MERGEBLOCKRATIO = ${i.specificRatio} ${l}`}return`${i.mergeRatio} MERGEBLOCKRATIO`},"getMergeBlockRatio"),$=c((i={})=>{if(i.blockSize==="SPECIFIC"&&i.specificSize){let l=i.units?` ${i.units}`:"";return i.blockSize+l}return`${i.blockSize} DATABLOCKSIZE`},"getDataBlockSize"),x=c((i,l)=>i==="SPECIFIC"&&l?`BLOCKCOMPRESSIONLEVEL = ${l}`:`BLOCKCOMPRESSIONLEVEL = ${i}`,"getBlockCompressionLevel"),b=c((i={})=>m.flow([d(!!i.blockCompressionType,`BLOCKCOMPRESSION = ${i.blockCompressionType}`),d(!!i.blockCompressionType,`BLOCKCOMPRESSIONALGORITHM = ${i.blockCompressionAlgorithm}`),d(!!i.blockCompressionLevel,x(i.blockCompressionLevel,i.specificBlockCompressionLevel))])([]),"getBlockCompression"),M=c(i=>["NO","CONCURRENT"].includes(i)?`WITH ${i} ISOLATED LOADING`:`WITH ISOLATED LOADING ${i}`,"getIsolatedLoading"),d=c((i,l,I=!1)=>g=>i?m.flatten([...g,l]):I?[...g,I]:g,"add"),T=c(i=>{let l=L(i.join(`,
`));return m.isEmpty(i)?l:`,
`+l},"formatTableOptions"),u=c(({FALLBACK:i,BEFORE_JOURNAL:l,AFTER_JOURNAL:I,DEFAULT_JOURNAL_TABLE:g,FREESPACE:h,TABLE_CHECKSUM:e,LOG:t,MAP:s,COLOCATE_USING:n,ISOLATED_LOADING:a,MERGE_BLOCK_RATIO:A,DATA_BLOCK_SIZE:O,BLOCK_COMPRESSION:f,QUEUE_TABLE:p,EXTERNAL_SECURITY:P,AUTHORIZATION_NAME:U},K=!1)=>m.flow([d(p,"QUEUE"),d(!!s,`MAP = ${s}${n?` COLOCATE USING ${n}`:""}`),d(i,"FALLBACK",K?"":"NO FALLBACK"),d(!!g,`WITH JOURNAL TABLE = ${g}`),d(t,"LOG",K?"":"NO LOG"),d(!!l,B(l,"BEFORE")),d(!!I,B(l,"AFTER")),d(!!e,`CHECKSUM = ${e}`),d(!!(h!=null&&h.freeSpaceValue),`FREESPACE = ${v(h)}`),d(!!(A!=null&&A.mergeRatio),y(A)),d(!!(O!=null&&O.blockSize),$(O)),d(!!(f!=null&&f.blockCompressionType),b(f)),d(!!a,M(a)),d(!!P,`EXTERNAL SECURITY ${P} TRUSTED${U?" "+U:""}`),T])([]),"getTableOptions"),r=c((i,l)=>{let I="";return I+=l?" ":"",I+=!i||i==="SECONDARY"?"INDEX":`${i} INDEX`,I},"getIndexType"),o=c((i=[])=>{if(m.isEmpty(i))return"";let l=E(i,g=>`"${g.name}"`);if(m.isEmpty(l.activatedItems))return l.deactivatedItems.join(", ");let I=l.deactivatedItems.length?C(l.deactivatedItems.join(", "),{isActivated:!1,isPartOfLine:!0}):"";return l.activatedItems.join(", ")+I},"getIndexKeys"),R=c(({indexMap:i,colocateUsing:l,indexFallback:I,checksum:g,blockCompression:h})=>m.flow([d(i,`MAP = ${i}${l?` COLOCATE USING ${l}`:""}`),d(I,"FALLBACK","NO FALLBACK"),d(g,`CHECKSUM = ${g}`),d(h,`BLOCKCOMPRESSION = ${h}`),T])([]),"getIndexOptions"),_=c(({isActivated:i,unique:l,indexType:I,all:g,indxKey:h,indxName:e,orderBy:t,orderKeys:s,loadIdentity:n})=>{if(m.isEmpty(h))return"";let a="";return a+=l?"UNIQUE":"",a+=r(I,l),a+=e?` "${e}"`:"",a+=g?" ALL":"",a+=m.isEmpty(h)?"":` ( ${o(h)} )`,a+=t?` ORDER BY ${t}`:"",a+=m.isEmpty(s)?"":` ( ${o(s)} )`,a+=n?` ${n}`:"",C(a,{isActivated:i})},"getTableInlineIndexStatement"),S=c(i=>i.map(_),"getTableInlineIndexStatements"),w=c(i=>{let l=i.find(I=>["PRIMARY","PRIMARY AMP"].includes(I.indexType)&&!m.isEmpty(I.indxKey));return l||{}},"findPrimaryIndex"),j=c(i=>i.filter(l=>(!l.indexType||l.indexType==="SECONDARY")&&!m.isEmpty(l.indxKey)),"filterSecondaryIndexes"),q=m.flow([w,_]),V=m.flow([j,S,m.compact]),Z=c(i=>i.map(l=>{let I="";return I+=l.columnFormat?l.columnFormat:"",I+=l.name&&l.columnFormat?` "${l.name}"`:`"${l.name}"`,I+=l.autoCompression?` ${l.autoCompression}`:"",I}),"getPartitionKeys"),z=c((i={})=>{let l="PARTITION BY";return l+=i.partitionBy==="column"?" COLUMN":"",l+=i.partitioningExpression?` ${i.partitioningExpression}`:"",l+=i.compositePartitionKey?` (
	${Z(i.compositePartitionKey).join(`,
	`)}
)`:"",l},"getPartitions");return{getTableOptions:u,getUsingOptions:c(({location:i,scanPercentage:l,pathPattern:I,manifest:g,tableFormat:h,rowFormat:e,storedAs:t,header:s,stripSpaces:n,stripEnclosingChar:a})=>m.flow([d(i,`LOCATION ( '${i}' )`),d(l,`SCANPCT = '${l}'`),d(I,`PATHPATTERN ( '${I}' )`),d(g,"MANIFEST ( 'TRUE' )","MANIFEST ( 'FALSE' )"),d(h,`TABLE_FORMAT ( '${h}' )`),d(e,`ROWFORMAT ( '${e}' )`),d(t,`STOREDAS ( '${t}' )`),d(s,"HEADER ( 'TRUE' )","STRIP_EXTERIOR_SPACES ( 'FALSE' )"),d(n,"STRIP_EXTERIOR_SPACES ( 'TRUE' )","STRIP_EXTERIOR_SPACES ( 'FALSE' )"),d(a,`STRIP_ENCLOSING_CHAR ( '${a}' )`),A=>L(A.join(`
	`))])([]),"getUsingOptions"),getInlineTableIndexes:c(i=>{let l=q(i.tableIndexes||[]),I=m.isEmpty(i.partitioning.partitioningExpression)&&m.isEmpty(i.partitioning.compositePartitionKey)?"":z(i.partitioning),g=V(i.tableIndexes||[]);if(!l&&!I&&m.isEmpty(g))return"";let h="";return h+=l||"",h+=I?`
`+I:"",`
`+L([h,...g].filter(Boolean).join(`,
`))},"getInlineTableIndexes"),getIndexOptions:R,getIndexKeys:o}}});var mt=G((kt,dt)=>{dt.exports=m=>{let L=c((r,o)=>`${r}(${o})`,"addLength"),B=c((r,o)=>L(r,o),"addChildType"),C=c((r,o)=>`${r}(${o})`,"addPrecision"),E=c((r,o,R)=>m.isNumber(R)?`${r}(${o},${R})`:C(r,o),"addScalePrecision"),v=c((r,o,R)=>{let _=o?C(r,o):r;return R?`${_} WITH TIME ZONE`:_},"addTimezonePrecision"),y=c((r,o,R,_)=>{let S=r;return S+=o?`(${o})`:"",S+=R?` TO ${R}`:"",S+=_?`(${_})`:"",S},"addPrecisionAndToPrecision"),$=c(r=>["CHAR","CHARACTER","VARCHAR","CHAR VARYING","CHARACTER VARYING","VARGRAPHIC","CLOB","CHARACTER LARGE OBJECT","BYTE","VARBYTE","BLOB","ARRAY","JSON","XML","XMLTYPE","ST_GEOMETRY"].includes(r),"canHaveLength"),x=c(r=>["DECIMAL","DEC","NUMERIC","NUMBER"].includes(r),"canHavePrecisionAndScale"),b=c(r=>["INTERVAL YEAR","INTERVAL DAY","INTERVAL HOUR","INTERVAL MINUTE"].includes(r),"canHavePrecisionAndToPrecision"),M=c(r=>["INTERVAL SECOND"].includes(r),"canHavePrecisionAndSecondPrecision"),d=c(r=>["TIME","TIMESTAMP"].includes(r),"canHaveFractionalSecondPrecision"),T=c(r=>["PERIOD"].includes(r),"canHaveChildType"),u=c((r,o)=>{if(r=m.toUpper(r),T(r)){let R=u(o.childValueType,o);return B(r,R)}else{if($(r)&&m.isNumber(o.length))return L(r,o.length);if(b(r))return y(r,o.precision,o.toPrecision,o.fractSecPrecision);if(M(r))return E(r,o.precision,o.fractSecPrecision);if(x(r)&&m.isNumber(o.precision))return E(r,o.precision,o.scale);if(d(r))return v(r,o.fractSecPrecision,o.timezone)}return r},"decorateType");return{decorateType:u}}});var N=qe(),ft=Xe(),Et=Qe(),Lt=De(),$t=tt();module.exports=(m,L,B)=>{let C=B.require("lodash"),{assignTemplates:E}=B.require("@hackolade/ddl-fe-utils"),{tab:v,commentIfDeactivated:y,checkAllKeysDeactivated:$,divideIntoActivatedAndDeactivated:x,hasType:b,clean:M,wrap:d,getDifferentProperties:T}=B.require("@hackolade/ddl-fe-utils").general,{generateConstraintsString:u,foreignKeysToString:r,foreignActiveKeysToString:o,createKeyConstraint:R}=rt()({_:C,commentIfDeactivated:y,checkAllKeysDeactivated:$,divideIntoActivatedAndDeactivated:x,assignTemplates:E}),_=st()(C,M),{getTableName:S,getIndexName:w,getDatabaseOptions:j,getViewData:q,getJournalingStrategy:V,viewColumnsToString:Z,shouldDropDefaultJournalTable:z}=ot()(C,v,y),{getTableOptions:H,getUsingOptions:D,getInlineTableIndexes:i,getIndexOptions:l,getIndexKeys:I}=lt()({_:C,tab:v,getJournalingStrategy:V,commentIfDeactivated:y,checkAllKeysDeactivated:$,divideIntoActivatedAndDeactivated:x}),{decorateType:g}=mt()(C),h=Lt(L.additionalOptions);return $t({commentIfDeactivated:y})(h.applyDropStatements,{hydrateDatabase(e){return{databaseName:e.name,isActivated:e.isActivated,db_account:e.db_account,db_default_map:e.db_default_map,db_permanent_storage_size:e.db_permanent_storage_size,spool_files_size:e.spool_files_size,has_fallback:e.has_fallback,db_before_journaling_strategy:e.db_before_journaling_strategy,db_after_journaling_strategy:e.db_after_journaling_strategy,db_default_journal_table:e.db_default_journal_table,db_default_journal_db:e.db_default_journal_db}},hydrateTable({tableData:e,entityData:t,jsonSchema:s}){let n=t[0],a=t[2].Indxs;return{...e,tableIndexes:a,keyConstraints:_.getTableKeyConstraints(s),tableOptions:n.tableOptions,partitioning:n.partitioning,selectStatement:n.selectStatement}},hydrateView({viewData:e,entityData:t}){let s=t[0];return{name:e.name,tableName:e.tableName,keys:e.keys,recursive:s.recursive,selectStatement:s.selectStatement}},hydrateIndex(e){return e},hydrateCheckConstraint(e){let t=c(s=>`CHECK (${C.trim(s).replace(/^\(([\s\S]*)\)$/,"$1")})`,"buildExpression");return{name:e.chkConstrName||"",expression:t(e.constrExpression)}},hydrateViewColumn(e){return{name:e.name,tableName:e.entityName,alias:e.alias,isActivated:e.isActivated,dbName:e.dbName}},hydrateColumn({columnDefinition:e,jsonSchema:t}){return{name:e.name,type:e.type,childValueType:t.childValueType,primaryKey:_.isInlinePrimaryKey(t),unique:_.isInlineUnique(t),isActivated:e.isActivated,length:e.length,inlineLength:t.inlineLength,storageFormat:t.storageFormat,withSchema:t.withSchema,precision:e.precision,scale:e.scale,required:!e.nullable,uppercase:t.uppercase,caseSpecific:t.caseSpecific,format:t.format,default:e.default,fractSecPrecision:t.fractSecPrecision,toPrecision:t.toPrecision,characterSet:t.characterSet,autoColumn:t.autoColumn,timezone:t.timezone,compress:t.compress,compressUsing:t.compressUsing,decompressUsing:t.decompressUsing,methodSpecification:t.methodSpecification}},createDatabase({databaseName:e,isActivated:t,db_account:s,db_default_map:n,db_permanent_storage_size:a,spool_files_size:A,has_fallback:O,db_before_journaling_strategy:f,db_after_journaling_strategy:p,db_default_journal_table:P,db_default_journal_db:U}){let K=j({db_account:s,db_default_map:n,db_permanent_storage_size:a,spool_files_size:A,has_fallback:O,db_before_journaling_strategy:f,db_after_journaling_strategy:p,db_default_journal_table:P,db_default_journal_db:U}),F=y(E(N.createDatabase,{name:e,databaseOptions:K}),{isActivated:t}),Y=E(N.createSession,{name:e});return[F,Y].join(`
`)},createUdt(e,t){let s=e.characterSet?` CHARACTER SET ${e.characterSet}`:"";if(e.type==="OBJECT"){if(C.isEmpty(e.properties))return"";let n=e.properties.map(a=>{let A=`"${a.name}" ${g(a.type,a)}`;return A+=a.characterSet?` CHARACTER SET ${a.characterSet}`:"",A}).join(`,
	`);return y(E(N.createStructuredType,{typeName:`"${e.name}"`,columnDefinitions:n,methodSpecification:e.methodSpecification?`
	${e.methodSpecification}`:""}),{isActivated:e.isActivated})}else if(e.type==="ARRAY"){if(C.isEmpty(e.items))return"";let n=C.first(e.items),a=g(n.type,n);return y(E(N.createArrayType,{typeName:`"${e.name}"`,baseType:`${a} ${g(e.type,e)}`,default:e.default?`
	DEFAULT ${e.default}`:""}),{isActivated:e.isActivated})}return y(E(N.createDistinctType,{typeName:`"${e.name}"`,baseType:g(e.type,e)+s,methodSpecification:e.methodSpecification?`
	${e.methodSpecification}`:""}),{isActivated:e.isActivated})},createTable(e,t){var ee;let{name:s,dbData:n,columns:a,checkConstraints:A,foreignKeyConstraints:O,selectStatement:f,tableOptions:p}=e,P=H(p),U=S(s,n.databaseName),K=i(e),F=p.TABLE_PRESERVATION?`
	ON COMMIT ${p.TABLE_PRESERVATION}`:"",Y=C.isEmpty(A)?"":`,
		`+A.join(`,
		`),X=x(e.keyConstraints.map(R(N,t)),J=>J.statement),k=u(X,t),W=x(O,J=>J.statement),Q=u(W,t);if(p.FOREIGN_TABLE&&((ee=p.USING)!=null&&ee.location)){let J=D(p.USING);return y(E(N.createForeignTable,{name:U,usingOptions:J,tableIndexes:K,tableOptions:P,column_definitions:a.join(`,
		`),keyConstraints:k,foreignKeyConstraints:Q,checkConstraints:Y,tablePreservation:F}),{isActivated:t})}return p.ERROR_TABLE&&p.FOR_TABLE?y(E(N.createErrorTable,{tableName:U,targetDataTable:p.FOR_TABLE}),{isActivated:t}):C.isEmpty(f)?y(E(N.createTable,{name:U,tableIndexes:K,tableOptions:P,tableSet:p.SET_MULTISET?` ${p.SET_MULTISET}`:"",temporary:p.TEMPORARY_VOLATILE?` ${p.TEMPORARY_VOLATILE}`:"",traceTable:p.TRACE_TABLE?" TRACE":"",column_definitions:a.join(`,
		`),keyConstraints:k,foreignKeyConstraints:Q,checkConstraints:Y,tablePreservation:F}),{isActivated:t}):y(E(N.createAsSelectTable,{tableSet:p.SET_MULTISET?` ${p.SET_MULTISET}`:"",temporary:p.TEMPORARY_VOLATILE?` ${p.TEMPORARY_VOLATILE}`:"",name:U,tableOptions:P,column_definitions:a.join(`,
		`),keyConstraints:k,foreignKeyConstraints:Q,checkConstraints:Y,selectStatement:f,tableIndexes:K,tablePreservation:F}),{isActivated:t})},createView(e,t,s){let{deactivatedWholeStatement:n,selectStatement:a}=this.viewSelectStatement(e,s);return y(E(N.createView,{name:S(e.name,t.databaseName),recursive:e.recursive?" RECURSIVE":"",selectStatement:a,columnList:Z(e.keys,s)}),{isActivated:!n})},viewSelectStatement(e,t=!0){let n=$(e.keys||[])||!t,{columns:a,tables:A}=q(e.keys),O=a.map(p=>p.statement).join(`,
		`);if(!n){let p=x(a,U=>U.statement),P=p.deactivatedItems.length?y(p.deactivatedItems.join(`,
		`),{isActivated:!1,isPartOfLine:!0}):"";O=p.activatedItems.join(`,
		`)+P}let f=C.trim(e.selectStatement)?C.trim(v(e.selectStatement)):E(N.viewSelectStatement,{tableName:A.join(", "),keys:O});return{deactivatedWholeStatement:n,selectStatement:f}},createIndex(e,t,s,n=!0){if(!["HASH","JOIN"].includes(t.indexType)||!t.indxName)return"";let A=l(t);if(t.indexType==="HASH"){if(C.isEmpty(t.indxKey))return"";let O=!C.isEmpty(t.orderKeys)&&!$(t.orderKeys||[]),f="";f+=t.orderBy?` ORDER BY ${t.orderBy}`:"",f+=!t.orderBy&&O?" ORDER BY":"",f+=O?` ( ${I(t.orderKeys)} )`:"";let p=$(t.indxKey||[]);return y(E(N.createHashIndex,{indexName:w(t.indxName,s.databaseName),tableName:S(e,s.databaseName),indexKeys:I(t.indxKey),orderBy:f,indexOptions:A}),{isActivated:n&&t.isActivated&&!p})}else if(t.indexType==="JOIN")return C.isEmpty(t.asSelect)?"":y(E(N.createJoinIndex,{indexName:w(t.indxName,s.databaseName),selectStatement:t.asSelect,indexOptions:A}),{isActivated:n&&t.isActivated});return""},createCheckConstraint(e){return E(N.checkConstraint,{name:e.name?`CONSTRAINT "${e.name}" `:"",expression:e.expression})},createCheckConstraintStatement(e,t,s){let n=S(e,s.databaseName);return E(N.alterTable,{tableName:n,tableOptions:"",alterStatement:E(N.addCheckConstraint,{name:d(t.name,'"','"'),expression:t.expression})})},dropCheckConstraint(e,t,s){let n=S(e,s.databaseName);return E(N.alterTable,{tableName:n,tableOptions:"",alterStatement:E(N.dropCheckConstraint,{name:d(t.name,'"','"')})})},alterCheckConstraint(e,{new:t,old:s},n){let a=S(e,n.databaseName),A=[];if(t.chkConstrName!==s.chkConstrName){let O=E(N.rename,{oldName:d(s.chkConstrName,'"','"'),newName:d(t.chkConstrName,'"','"')});A.push(O)}if(t.constrExpression!==s.constrExpression){let O=E(N.modifyCheckConstraint,{name:d(s.chkConstrName,'"','"'),expression:t.chkConstrName});A.push(O)}return E(N.alterTable,{tableName:a,tableOptions:"",alterStatement:`
`+v(A.join(`,
`))})},createForeignKeyConstraint({foreignKey:e,primaryTable:t,primaryKey:s,primaryTableActivated:n,foreignTableActivated:a,customProperties:A,isActivated:O},f){let p=$(s),P=$(e),U=!p&&!P&&n&&a&&O!==!1;return{statement:E(N.createForeignKeyConstraint,{checkOption:A.checkOption,primaryTable:S(t,f.databaseName),foreignKey:U?r(e):o(e),primaryKey:U?r(s):o(s)}),isActivated:U}},convertColumnDefinition(e){let t=this.hasType(e.type)?g(e.type,e):`"${e.type}"`,s=e.inlineLength?` INLINE LENGTH ${e.inlineLength}`:"",n=e.required?" NOT NULL":"",a=e.unique&&!e.nullable?" UNIQUE":"",A=e.primaryKey&&!e.nullable?" PRIMARY KEY":"",O=e.characterSet?` CHARACTER SET ${e.characterSet}`:"",f=e.storageFormat?` STORAGE FORMAT ${e.storageFormat}`:"",p=e.withSchema?` WITH SCHEMA ${e.withSchema}`:"",P=e.default?` DEFAULT ${e.default}`:"",U=e.uppercase?" UPPERCASE":"",K=e.caseSpecific?" CASESPECIFIC":"",F=e.format?` FORMAT '${e.format}'`:"",Y=e.autoColumn?" AUTO COLUMN":"",X=e.compress?` COMPRESS (${e.compress})`:"",k=e.compressUsing?` COMPRESS USING ${e.compressUsing}`:"",W=e.decompressUsing?` DECOMPRESS USING ${e.decompressUsing}`:"";return y(E(N.columnDefinition,{name:e.name,not_null:n,default:P,type:t,inlineLength:s,storageFormat:f,withSchema:p,uppercase:U,caseSpecific:K,format:F,autoColumn:Y,compress:X,compressUsing:k,decompressUsing:W,characterSet:O,inlineUniqueConstraint:a,inlinePKConstraint:A,inlineCheckConstraint:""}),{isActivated:e.isActivated})},hydrateDropDatabase(e){var t;return{databaseName:((t=e[0])==null?void 0:t.name)||""}},hydrateAlterDatabase({containerData:e,compModeData:t}){let s=e[0]||{},n=t.new.db_account!==t.old.db_account,a=t.new.db_default_map!==t.old.db_default_map,A=t.new.db_permanent_storage_size!==t.old.db_permanent_storage_size,O=t.new.spool_files_size!==t.old.spool_files_size,f=t.new.temporary_tables_size!==t.old.temporary_tables_size,p=t.new.has_fallback!==t.old.has_fallback,P=t.new.db_before_journaling_strategy!==t.old.db_before_journaling_strategy,U=t.new.db_after_journaling_strategy!==t.old.db_after_journaling_strategy,K=t.new.db_default_journal_db!==t.old.db_default_journal_db||t.new.db_default_journal_table!==t.old.db_default_journal_table,F=z(t);return{name:s.name||"",...n&&{db_account:s.db_account},...a&&{db_default_map:s.db_default_map},...A&&{db_permanent_storage_size:s.db_permanent_storage_size},...O&&{spool_files_size:s.spool_files_size},...f&&{temporary_tables_size:s.temporary_tables_size},...p&&{has_fallback:s.has_fallback},...P&&{db_before_journaling_strategy:s.db_before_journaling_strategy},...U&&{db_after_journaling_strategy:s.db_after_journaling_strategy},...K&&{db_default_journal_db:F?t.old.db_default_journal_db:s.db_default_journal_db,db_default_journal_table:F?t.old.db_default_journal_table:s.db_default_journal_table,dropDefaultJournalTable:F}}},hydrateDropTable({tableData:e,entityData:t}){var n;let s=t[0];return{name:e.name,dbName:e.dbData.databaseName,temporary:((n=s==null?void 0:s.tableOptions)==null?void 0:n.TEMPORARY_VOLATILE)==="GLOBAL TEMPORARY"}},hydrateAlterTable({name:e,newEntityData:t,oldEntityData:s}){var te,ne,re,ae,se,ie,oe,ce,le,de,me,Ee,Ae,Te,ue,pe,Se,Re,Ne,Ce,Oe,Ie,ye,be,fe,Le,$e,_e,ge,Ue,Be,Pe,he,Me,Ke,ve,Fe,xe,Ve,Ge,Ye,we,He,ke,Je;let n=((te=t[0])==null?void 0:te.tableOptions)||{},a=((ne=s[0])==null?void 0:ne.tableOptions)||{},A=n.ERROR_TABLE!==a.ERROR_TABLE,O=n.FOR_TABLE!==a.FOR_TABLE,f=n.FOREIGN_TABLE!==a.FOREIGN_TABLE,p=n.SET_MULTISET!==a.SET_MULTISET,P=n.TEMPORARY_VOLATILE!==a.TEMPORARY_VOLATILE,U=n.QUEUE_TABLE!==a.QUEUE_TABLE,K=n.TRACE_TABLE!==a.TRACE_TABLE,F=n.EXTERNAL_SECURITY!==a.EXTERNAL_SECURITY,Y=n.AUTHORIZATION_NAME!==a.AUTHORIZATION_NAME,X=n.MAP!==a.MAP,k=n.COLOCATE_USING!==a.COLOCATE_USING,W=n.FALLBACK!==a.FALLBACK,Q=n.DEFAULT_JOURNAL_TABLE!==a.DEFAULT_JOURNAL_TABLE,ee=n.LOG!==a.LOG,J=n.BEFORE_JOURNAL!==a.BEFORE_JOURNAL,At=n.AFTER_JOURNAL!==a.AFTER_JOURNAL,Tt=n.TABLE_CHECKSUM!==a.TABLE_CHECKSUM,ut=n.ISOLATED_LOADING!==a.ISOLATED_LOADING,pt=n.TABLE_PRESERVATION!==a.TABLE_PRESERVATION,St=((re=n.FREESPACE)==null?void 0:re.freeSpaceValue)!==((ae=a.FREESPACE)==null?void 0:ae.freeSpaceValue)||((se=n.FREESPACE)==null?void 0:se.percentUnit)!==((ie=a.FREESPACE)==null?void 0:ie.percentUnit),Rt=((oe=n.MERGE_BLOCK_RATIO)==null?void 0:oe.mergeRatio)!==((ce=a.MERGE_BLOCK_RATIO)==null?void 0:ce.mergeRatio)||((le=n.MERGE_BLOCK_RATIO)==null?void 0:le.specificRatio)!==((de=a.MERGE_BLOCK_RATIO)==null?void 0:de.specificRatio)||((me=n.MERGE_BLOCK_RATIO)==null?void 0:me.percentUnit)!==((Ee=a.MERGE_BLOCK_RATIO)==null?void 0:Ee.percentUnit),Nt=n.DATA_BLOCK_SIZE.blockSize!==((Ae=a.DATA_BLOCK_SIZE)==null?void 0:Ae.blockSize)||((Te=n.DATA_BLOCK_SIZE)==null?void 0:Te.specificSize)!==((ue=a.DATA_BLOCK_SIZE)==null?void 0:ue.specificSize)||((pe=n.DATA_BLOCK_SIZE)==null?void 0:pe.units)!==((Se=a.DATA_BLOCK_SIZE)==null?void 0:Se.units),Ct=((Re=n.BLOCK_COMPRESSION)==null?void 0:Re.blockCompressionType)!==((Ne=a.BLOCK_COMPRESSION)==null?void 0:Ne.blockCompressionType)||((Ce=n.BLOCK_COMPRESSION)==null?void 0:Ce.blockCompressionAlgorithm)!==((Oe=a.BLOCK_COMPRESSION)==null?void 0:Oe.blockCompressionAlgorithm)||((Ie=n.BLOCK_COMPRESSION)==null?void 0:Ie.blockCompressionLevel)!==((ye=a.BLOCK_COMPRESSION)==null?void 0:ye.blockCompressionLevel)||((be=n.BLOCK_COMPRESSION)==null?void 0:be.specificBlockCompressionLevel)!==((fe=a.BLOCK_COMPRESSION)==null?void 0:fe.specificBlockCompressionLevel),Ot=((Le=n.USING)==null?void 0:Le.location)!==(($e=a.USING)==null?void 0:$e.location)||((_e=n.USING)==null?void 0:_e.scanPercentage)!==((ge=a.USING)==null?void 0:ge.scanPercentage)||((Ue=n.USING)==null?void 0:Ue.pathPattern)!==((Be=a.USING)==null?void 0:Be.pathPattern)||((Pe=n.USING)==null?void 0:Pe.manifest)!==((he=a.USING)==null?void 0:he.manifest)||((Me=n.USING)==null?void 0:Me.tableFormat)!==((Ke=a.USING)==null?void 0:Ke.tableFormat)||((ve=n.USING)==null?void 0:ve.rowFormat)!==((Fe=a.USING)==null?void 0:Fe.rowFormat)||((xe=n.USING)==null?void 0:xe.storedAs)!==((Ve=a.USING)==null?void 0:Ve.storedAs)||((Ge=n.USING)==null?void 0:Ge.header)!==((Ye=a.USING)==null?void 0:Ye.header)||((we=n.USING)==null?void 0:we.stripSpaces)!==((He=a.USING)==null?void 0:He.stripSpaces)||((ke=n.USING)==null?void 0:ke.stripEnclosingChar)!==((Je=a.USING)==null?void 0:Je.stripEnclosingChar);return{name:e,tableOptions:{...A&&{ERROR_TABLE:n.ERROR_TABLE},...O&&{FOR_TABLE:n.FOR_TABLE},...f&&{FOREIGN_TABLE:n.FOREIGN_TABLE},...p&&{SET_MULTISET:n.SET_MULTISET},...P&&{TEMPORARY_VOLATILE:n.TEMPORARY_VOLATILE},...U&&{QUEUE_TABLE:n.QUEUE_TABLE},...K&&{TRACE_TABLE:n.TRACE_TABLE},...F&&{EXTERNAL_SECURITY:n.EXTERNAL_SECURITY},...Y&&{AUTHORIZATION_NAME:n.AUTHORIZATION_NAME},...X&&{MAP:n.MAP},...k&&{COLOCATE_USING:n.COLOCATE_USING},...W&&{FALLBACK:n.FALLBACK},...Q&&{DEFAULT_JOURNAL_TABLE:n.DEFAULT_JOURNAL_TABLE},...ee&&{LOG:n.LOG},...J&&{BEFORE_JOURNAL:n.BEFORE_JOURNAL},...At&&{AFTER_JOURNAL:n.AFTER_JOURNAL},...Tt&&{TABLE_CHECKSUM:n.TABLE_CHECKSUM},...ut&&{ISOLATED_LOADING:n.ISOLATED_LOADING},...pt&&{TABLE_PRESERVATION:n.TABLE_PRESERVATION},...St&&{FREESPACE:n.FREESPACE},...Rt&&{MERGE_BLOCK_RATIO:n.MERGE_BLOCK_RATIO},...Nt&&{DATA_BLOCK_SIZE:n.DATA_BLOCK_SIZE},...Ct&&{BLOCK_COMPRESSION:n.BLOCK_COMPRESSION},...Ot&&{USING:n.USING}}}},hydrateDropColumn({name:e}){return{name:e}},hydrateAlterColumn({newColumn:e,oldColumn:t,oldCompData:s,newCompData:n}){let a=T(e,t,["name","type"]),A={...e};return s.name!==n.name&&(A.oldName=s.name),s.type!==n.type&&(A.oldType=s.type),C.isEmpty(a)||(A.newOptions=a),A},hydrateDropView({tableData:e}){return{name:e.name,dbData:e.dbData}},hydrateAlterView({name:e,newEntityData:t,oldEntityData:s,viewData:n}){var p,P,U,K,F;let a=this.hydrateView({viewData:{},entityData:t}),A=this.hydrateView({viewData:{},entityData:s}),O={};((p=s[0])==null?void 0:p.name)!==((P=t[0])==null?void 0:P.name)&&(O.oldName=(U=s[0])==null?void 0:U.name);let f=T(a,A);return{name:e,keys:n.keys,selectStatement:f.selectStatement||((K=t[0])==null?void 0:K.selectStatement),recursive:f.recursive||((F=t[0])==null?void 0:F.recursive),options:f,...O}},getDefaultType(e){return ft[e]},getTypesDescriptors(){return Et},hasType(e){return b(Et,e)},dropDatabase(e){return E(N.dropDatabase,e)},alterDatabase(e){let t=j(e);return E(N.modifyDatabase,{databaseName:e.name,databaseOptions:t})},dropTable(e){return E(N.dropTable,{name:S(e.name,e.dbName),temporary:e.temporary?"TEMPORARY ":""})},alterTable(e,t){let s=S(e.name,t.databaseName),n=H(e.tableOptions,!0);return C.trim(n)?E(N.alterTable,{tableName:s,tableOptions:n}):""},dropColumn(e,t,s){let n=S(e,s.databaseName);return E(N.alterTable,{tableName:n,tableOptions:"",alterStatement:E(N.dropColumn,{name:d(t.name,'"','"')})})},addColumn(e,t,s){let n=S(e,s.databaseName);return E(N.alterTable,{tableName:n,tableOptions:"",alterStatement:E(N.addColumn,{columnDefinition:this.convertColumnDefinition(t)})})},renameColumn(e,t,s){let n=S(e,s.databaseName);return E(N.alterTable,{tableName:n,tableOptions:"",alterStatement:E(N.rename,{oldName:d(t.oldName,'"','"'),newName:d(t.name,'"','"')})})},alterColumn(e,t,s){let n=S(e,s.databaseName),a=[];if(t.oldName&&t.oldType||t.oldType){let A=this.dropColumn(e,{name:t.name},s),O=this.addColumn(e,{...t,isActivated:!0},s);a.push(A,O)}else if(t.oldName&&!t.newOptions){let A=this.renameColumn(e,t,s);a.push(A)}else if(t.oldName&&t.newOptions){let A=this.renameColumn(e,t,s),O=this.addColumn(e,{...t,isActivated:!0},s);a.push(A,O)}else{let A=this.addColumn(e,{...t,isActivated:!0},s);a.push(A)}return y(a.join(`

`),{isActivated:t.isActivated})},dropIndex(e,t,s){if(!t.indxName)return"";let n=S(e,s.databaseName);if(["PRIMARY","PRIMARY AMP"].includes(t.indexType))return"";if(!t.indexType||t.indexType==="SECONDARY")return E(N.dropSecondaryIndex,{indexName:d(t.indxName,'"','"'),tableName:n});let a=t.indexType?` ${t.indexType}`:"",A=w(t.indxName,s.databaseName);return E(N.dropIndex,{indexName:A,indexType:a})},alterIndex(e,{new:t,old:s},n){return[this.dropIndex(e,s,n),this.createIndex(e,{...t,indxKey:t.indxKey.filter(a=>a.isActivated!==!1)},n)].join(`

`)},dropView({name:e,dbData:t}){let s=S(e,t.databaseName);return E(N.dropView,{viewName:s})},alterView(e,t){let s=C.isEmpty(e.options),n=S(e.name,t.databaseName);if(e.oldName&&s){let a=S(e.oldName,t.databaseName);return E(N.renameView,{oldViewName:a,newViewName:n})}else if(s)return"";return[this.dropView({name:e.oldName||e.name,dbData:t}),this.createView(e,t,!0)].join(`

`)}})};
